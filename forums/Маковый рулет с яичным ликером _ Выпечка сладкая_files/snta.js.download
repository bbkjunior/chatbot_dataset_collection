
function getNode(nodeId){if(document.getElementById){return document.getElementById(nodeId);}else{if(document.all&&document.all(nodeId)){return document.all(nodeId);}else{if(document.layers&&document.layers[nodeId]){return document.layers[nodeId];}else{return false;}}}}
function ohide(nodeId){getNode(nodeId).style.display="none";}function oshow(nodeId){getNode(nodeId).style.display="block";}function oshowon(nodeId){getNode(nodeId).style.display="inline";}function is_shown(nodeId){if(getNode(nodeId).style.display!==""){return false;}else{return true;}}
function unCheckAll(){var n,i,oForm;oForm=document.fbrowse;n=oForm.elements.length;for(i=0;i<n;i++){if(oForm.elements[i].name.indexOf("del")!=-1){oForm.elements[i].checked=false;}}return false;}function checkAll(){var n,i,oForm;oForm=document.fbrowse;n=oForm.elements.length;for(i=0;i<n;i++){if(oForm.elements[i].name.indexOf("del")!=-1){oForm.elements[i].checked=true;}}return false;}function setCheckOne(oForm,strname,setto){var n,i;n=oForm.elements.length;for(i=0;i<n;i++){if(oForm.elements[i].name.indexOf(strname)!=-1){oForm.elements[i].checked=setto;}}return false;}function expcol(n,imgplus,imgminus){var dvs,ims,info,pic;dvs=document.getElementsByTagName("div");ims=document.getElementsByTagName("img");info=document.getElementById("expcol"+n);pic=document.getElementById("ShowHide"+n);if(info.className=="expanded"){info.className="collapsed";pic.src=imgplus;}else{info.className="expanded";pic.src=imgminus;}}function recheckAll(oForm,checkboxnames,checkboxname){var n,i,val;val=document.getElementById(checkboxname).checked;n=oForm.elements.length;for(i=0;i<n;i++){if(oForm.elements[i].type=="checkbox"&&oForm.elements[i].name.indexOf(checkboxnames)!=-1){oForm.elements[i].checked=val;}}return false;}function inputin(a,deftext){if(a.value==deftext){a.value="";}}function inputout(a,deftext){if(a.value==""){a.value=deftext;}}function loadXMLDoc(url,span_id,funconload,passvar,functionnotload){var xmlhttp;if(funconload==undefined){funconload=fonload1;}if(passvar==undefined){passvar="";}if(functionnotload==undefined){functionnotload=fnoload1;}if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){if(span_id){document.getElementById(span_id).innerHTML=xmlhttp.responseText;}funconload(xmlhttp,passvar);}else{}}};if(xmlhttp.readyState==4){if(xmlhttp.status==200){if(span_id){document.getElementById(span_id).innerHTML=xmlhttp.responseText;}funconload(xmlhttp,passvar);}else{}}xmlhttp.open("GET",url,true);xmlhttp.send(null);}else{if(window.ActiveXObject){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");if(xmlhttp){xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){if(span_id){document.getElementById(span_id).innerHTML=xmlhttp.responseText;}funconload(xmlhttp,passvar);}else{}}};xmlhttp.open("GET",url,true);xmlhttp.send();}}}}function fnoload1(xmlhttp,passvar){}function fonload1(xmlhttp,passvar){}function newwin(url,w,h,x,y,zname){var str;str="top="+x+",left="+y+",scrollbars=1,resizable=yes,status=0,width="+w+",height="+h;window.open(url,zname,str);}var lat,cyr,latcap,cyrcap,latback,cyrback;lat=new Array("sojal","uvaj","juju","ayu","shch","sch","aja","''","ea","'e","'","`","ay","aj","zz","sh","ch","je","ja","ya","jo","oju","oje","oja","oj","uj","yi","ya","ja","ju","yu","ja","y","zh","j'","''","je","ju","ja","jo","zh","ch","sh","ea","a","b","v","g","d","e","z","i","j","k","l","m","n","o","p","r","s","t","u","f","h","c","ch","sh","w","'","y","a","b","v","w","g","d","e","z","i","k","l","m","n","o","p","r","s","t","u","f","x","c");cyr=new Array("сожал","уваж","юю","aю","щ","щ","ая","ъ","э","э","ь","ъ","ай","ай","цц","ш","ч","же","я","я","ё","ою","оже","ожа","ой","уй","ый","я","я","ю","ю","я","ы","ж","й","ъ","э","ю","я","ё","ж","ч","ш","э","а","б","в","г","д","е","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ь","ы","а","б","в","в","г","д","е","з","и","к","л","м","н","о","п","р","с","т","у","ф","х","ц");latcap=new Array("Sojal","Uvaj","Juju","Ayu","Shch","Sch","Aja","Ea","'E","Ay","Aj","Zz","Sh","Ch","Je","Ja","Ya","Jo","Oju","Oje","Oja","Oj","Uj","Yi","Ya","Ja","Ju","Yu","Ja","Y","Zh","J'","Je","Ju","Ja","Jo","Zh","Ch","Sh","Ea","A","B","V","G","D","E","Z","I","J","K","L","M","N","O","P","R","S","T","U","F","H","C","Ch","Sh","W","Y","A","B","V","W","G","D","E","Z","I","K","L","M","N","O","P","R","S","T","U","F","X","C");cyrcap=new Array("Сожал","Уваж","Юю","Aю","Щ","Щ","Ая","Э","Э","Ай","Ай","Цц","Ш","Ч","Же","Я","Я","Ё","Ою","Оже","Ожа","Ой","Уй","Ый","Я","Я","Ю","Ю","Я","Ы","Ж","Й","Э","Ю","Я","Ё","Ж","Ч","Ш","Э","А","Б","В","Г","Д","Е","З","И","Й","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц","Ч","Ш","Щ","Ы","А","Б","В","В","Г","Д","Е","З","И","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц");latback=new Array("(пиц)","(qуоте)","(имг)","(урл)","и\\]","б\\]","цоде\\]","у\\]","\\[лист","лист\\]",":-Д");cyrback=new Array("pic","quote","img","url","i]","b]","code]","u]","[list","list]",":-D");function translit(){var buf,selection,txtarea,regExp,i;buf=new String;selection=false;txtarea=document.post.me7age;if(document.selection){selection=document.selection.createRange().text;}if(selection){buf=selection;}else{buf=txtarea.value;}for(i=0;i<latcap.length;i++){eval("regexp = /"+latcap[i]+"/g");buf=buf.replace(regexp,cyrcap[i]);}for(i=0;i<lat.length;i++){eval("regexp = /"+lat[i]+"/g");buf=buf.replace(regexp,cyr[i]);}for(i=0;i<latback.length;i++){eval("regexp = /"+latback[i]+"/g");buf=buf.replace(regexp,cyrback[i]);}if(selection){eval("regexp = /"+selection+"/");txtarea.value=txtarea.value.replace(regexp,buf);}else{txtarea.value=buf;}selection="";txtarea.focus();return;}
var imageTag,theSelection,clientPC,clientVer,is_ie,is_nav,is_moz,is_win,is_mac,selection;imageTag=false;theSelection=false;clientPC=navigator.userAgent.toLowerCase();clientVer=parseInt(navigator.appVersion);is_ie=((clientPC.indexOf("msie")!=-1)&&(clientPC.indexOf("opera")==-1));is_nav=((clientPC.indexOf("mozilla")!=-1)&&(clientPC.indexOf("spoofer")==-1)&&(clientPC.indexOf("compatible")==-1)&&(clientPC.indexOf("opera")==-1)&&(clientPC.indexOf("webtv")==-1)&&(clientPC.indexOf("hotjava")==-1));is_moz=0;is_win=((clientPC.indexOf("win")!=-1)||(clientPC.indexOf("16bit")!=-1));is_mac=(clientPC.indexOf("mac")!=-1);bbcode=new Array();bbtags=new Array("[b]","[/b]","[i]","[/i]","[u]","[/u]","[quote]","[/quote]","[code]","[/code]","[list]","[/list]","[list=]","[/list]","[img]","[/img]","[url]","[/url]");imageTag=false;function getarraysize(thearray){var i;for(i=0;i<thearray.length;i++){if((thearray[i]=="undefined")||(thearray[i]=="")||(thearray[i]==null)){return i}}return thearray.length}function arraypush(thearray,value){thearray[getarraysize(thearray)]=value}function arraypop(thearray){thearraysize=getarraysize(thearray);retval=thearray[thearraysize-1];delete thearray[thearraysize-1];return retval}function checkForm(){formErrors=false;if(document.post.me7age.value.length<2){formErrors=l_empty_message}if(formErrors){alert(formErrors);return false}else{bbstyle(-1);return true}}
function emoticon(text){var txtarea,caretPos;txtarea=document.post.me7age;text=" "+text+" ";if(txtarea.createTextRange&&txtarea.caretPos){caretPos=txtarea.caretPos;caretPos.text=caretPos.text.charAt(caretPos.text.length-1)==" "?caretPos.text+text+" ":caretPos.text+text;txtarea.focus()}else{txtarea.value+=text;txtarea.focus()}}
function emoticon_wospaces(text){var txtarea,caretPos;txtarea=document.post.me7age;if(txtarea.createTextRange&&txtarea.caretPos){caretPos=txtarea.caretPos;caretPos.text=caretPos.text.charAt(caretPos.text.length-1)==" "?caretPos.text+text+" ":caretPos.text+text;txtarea.focus()}else{txtarea.value+=text;txtarea.focus()}}function bbstyle(bbnumber){var txtarea,i;txtarea=document.post.me7age;txtarea.focus();donotinsert=false;theSelection=false;bblast=0;if(bbnumber==-1){while(bbcode[0]){butnumber=arraypop(bbcode)-1;txtarea.value+=bbtags[butnumber+1];buttext=eval("document.post.addbbcode"+butnumber+".value");eval("document.post.addbbcode"+butnumber+'.value ="'+buttext.substr(0,(buttext.length-1))+'"')}imageTag=false;txtarea.focus();return}if((clientVer>=4)&&is_ie&&is_win){theSelection=document.selection.createRange().text;if(theSelection){document.selection.createRange().text=bbtags[bbnumber]+theSelection+bbtags[bbnumber+1];txtarea.focus();theSelection="";return}}else{if(txtarea.selectionEnd&&(txtarea.selectionEnd-txtarea.selectionStart>0)){mozWrap(txtarea,bbtags[bbnumber],bbtags[bbnumber+1]);return}}for(i=0;i<bbcode.length;i++){if(bbcode[i]==bbnumber+1){bblast=i;donotinsert=true}}if(donotinsert){while(bbcode[bblast]){butnumber=arraypop(bbcode)-1;txtarea.value+=bbtags[butnumber+1];buttext=eval("document.post.addbbcode"+butnumber+".value");eval("document.post.addbbcode"+butnumber+'.value ="'+buttext.substr(0,(buttext.length-1))+'"');imageTag=false}txtarea.focus();return}else{if(imageTag&&(bbnumber!=14)){txtarea.value+=bbtags[15];lastValue=arraypop(bbcode)-1;document.post.addbbcode14.value="Img";imageTag=false}txtarea.value+=bbtags[bbnumber];if((bbnumber==14)&&(imageTag==false)){imageTag=1}arraypush(bbcode,bbnumber+1);eval("document.post.addbbcode"+bbnumber+'.value += "*"');txtarea.focus();return}storeCaret(txtarea)}function mozWrap(txtarea,open,close){var selLength,selStart,selEnd,s1,s2,s3;selLength=txtarea.textLength;selStart=txtarea.selectionStart;selEnd=txtarea.selectionEnd;if(selEnd==1||selEnd==2){selEnd=selLength}s1=(txtarea.value).substring(0,selStart);s2=(txtarea.value).substring(selStart,selEnd);s3=(txtarea.value).substring(selEnd,selLength);txtarea.value=s1+open+s2+close+s3;return}function storeCaret(textEl){if(textEl.createTextRange){textEl.caretPos=document.selection.createRange().duplicate()}}selection=false;
function catchSelection(){if(window.getSelection){selection=window.getSelection().toString()}else{if(document.getSelection){selection=document.getSelection()}else{if(document.selection){selection=document.selection.createRange().text}}}}function catchSelection2(prid){var opr = document.getElementById(prid);var oprimg = opr.getElementsByTagName('img');var tagObj;for(var i=0;i<oprimg.length;i++){tagObj=oprimg[i];tagObj.setAttribute('alt','');tagObj.title=''}if(window.getSelection){selection=window.getSelection().toString()}else{if(document.getSelection){selection=document.getSelection()}else{if(document.selection){selection=document.selection.createRange().text}}}}function putName(name){emoticon_wospaces("[b]"+name+"[/b]\n");document.post.me7age.focus();return}
function quoteSelection(name){if(selection){emoticon_wospaces('[quote="'+name+'"]'+selection+"[/quote]\n");selection="";document.post.me7age.focus();return false}else{return true}}
function quotePost(name,ipost){if(selection){emoticon_wospaces('[quote="'+name+'"]'+selection+"[/quote]\n");selection="";document.post.me7age.focus();onotame=getNode('notame');if(onotame){onotame.innerHTML='<br /><a href="#'+ipost+'">Вернуться к цитируемому сообщению</a>';onotame.style.paddingLeft="15px";onotame.onclick=function(){this.innerHTML=''}}return false}else{return true}}
function setCaretTo(obj,pos){if(obj.createTextRange){var range=obj.createTextRange();range.move('character',pos);range.select();}else if(obj.selectionStart){obj.focus();obj.setSelectionRange(pos,pos);}}
function insertAtCaret(obj,text){var actual,tmp,start,index;if(document.selection){obj.focus();var orig=obj.value.replace(/\r\n/g,"\n");var range=document.selection.createRange();if(range.parentElement()!=obj){return false;}
range.text=text;actual=tmp=obj.value.replace(/\r\n/g,"\n");for(var diff=0;diff<orig.length;diff++){if(orig.charAt(diff)!=actual.charAt(diff)){break;}}
for(index=0,start=0;tmp.match(text)&&(tmp=tmp.replace(text,""))&&index<=diff;index=start+text.length){start=actual.indexOf(text,index);}}else if(obj.selectionStart){start=obj.selectionStart;var end=obj.selectionEnd;obj.value=obj.value.substr(0,start)+text+obj.value.substr(end,obj.value.length);}
if(start!==null){setCaretTo(obj,start+text.length);}else{obj.value+=text;}}
function emoticon2(text){var txtarea=document.post.me7age;text=' '+text+' ';txtarea.focus();if(txtarea.value==''){txtarea.value+=text;}else{if(txtarea.createTextRange&&txtarea.caretPos){caretPos=txtarea.caretPos;caretPos.text=caretPos.text.charAt(caretPos.text.length-1)==" "?caretPos.text+text+" ":caretPos.text+text;txtarea.focus()}else{insertAtCaret(txtarea,text);}}txtarea.focus();}